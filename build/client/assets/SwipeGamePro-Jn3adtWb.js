import{r as o,j as e,u as F,b as $,f as B,a as L}from"./index-DfLu_CnZ.js";import{u as T}from"./useSwipeGame-DNdD0kt1.js";function X({card:r,index:s,isActive:i,onSwipe:g,correctAnswer:S,onButtonClick:y}){const[p,b]=o.useState(null),[z,h]=o.useState(0),[d,v]=o.useState(!1),[c,x]=o.useState({x:0,rotation:0}),u=r?.character||r?.word||"",t=o.useCallback(a=>{if(!r||p==="exit")return;const f=a===S,m=a?"right":"left";b("exit"),x({x:m==="right"?300:-300,rotation:m==="right"?10:-10}),setTimeout(()=>{g(f,m,r.correctRomaji,u)},220)},[r,S,g,u,p]);if(o.useEffect(()=>{y&&i&&(y.current=t)},[y,i,t]),o.useEffect(()=>{if(!i||p||!r)return;const a=f=>{f.key==="ArrowLeft"?(f.preventDefault(),t(!1)):f.key==="ArrowRight"&&(f.preventDefault(),t(!0))};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[i,p,r,t]),!r)return null;const k=a=>{!i||p||(a.preventDefault(),v(!0),b("swiping"),h(a.touches?a.touches[0].clientX:a.clientX))},j=a=>{if(!i||!d)return;a.preventDefault();const m=(a.touches?a.touches[0].clientX:a.clientX)-z;x({x:m,rotation:Math.max(-8,Math.min(8,m/300*6))})},w=()=>{!i||!d||(v(!1),c.x<-80?t(!1):c.x>80?t(!0):(b(null),x({x:0,rotation:0})))},l=()=>d?"none":p==="exit"?"all 0.22s ease-out":"all 0.28s cubic-bezier(0.34, 1.2, 0.64, 1)",n=Math.min(1,Math.abs(c.x)/50),C=c.x>0,R=c.x<0,D=s*6,E=1-s*.02,M=s===0?1:Math.max(.5,.75-s*.12),I=s===0?0:s*2;return e.jsxs(e.Fragment,{children:[s===0&&e.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",transform:`translateX(calc(-50% + ${c.x}px)) translateY(-50%) rotate(${c.rotation}deg)`,width:"calc(100% - 24px)",maxWidth:"360px",aspectRatio:"3/4",borderRadius:"32px",border:"3px solid rgba(236, 72, 153, 0.8)",boxShadow:`
            0 0 20px rgba(236, 72, 153, 0.9),
            0 0 40px rgba(236, 72, 153, 0.6),
            0 0 60px rgba(236, 72, 153, 0.4),
            0 0 80px rgba(236, 72, 153, 0.2),
            inset 0 0 30px rgba(236, 72, 153, 0.1)
          `,zIndex:99,pointerEvents:"none",transition:l(),opacity:p==="exit"?0:1}}),e.jsxs("div",{onTouchStart:k,onTouchMove:j,onTouchEnd:w,onMouseDown:k,onMouseMove:d?j:void 0,onMouseUp:w,onMouseLeave:d?w:void 0,style:{position:"absolute",left:"50%",top:"50%",transform:`translateX(calc(-50% + ${c.x}px)) translateY(calc(-50% + ${D}px)) rotate(${c.rotation}deg) scale(${E})`,width:"calc(100% - 48px)",maxWidth:"320px",aspectRatio:"3/4",background:"linear-gradient(145deg, rgba(75, 85, 99, 0.7) 0%, rgba(55, 65, 81, 0.8) 50%, rgba(45, 55, 75, 0.85) 100%)",backdropFilter:"blur(28px)",WebkitBackdropFilter:"blur(28px)",borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.15)",zIndex:100-s,cursor:i&&!d?"grab":d?"grabbing":"default",transition:l(),willChange:"transform, opacity",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",opacity:p==="exit"?0:M,userSelect:"none",overflow:"hidden",touchAction:"none",filter:I>0?`blur(${Math.max(0,I-1)}px)`:"none"},children:[e.jsx("div",{style:{position:"absolute",top:"-60%",left:"-60%",width:"220%",height:"220%",background:"linear-gradient(135deg, transparent 0%, transparent 35%, rgba(255,255,255,0.2) 45%, rgba(255,255,255,0.08) 55%, transparent 65%, transparent 100%)",pointerEvents:"none",transform:"rotate(0deg)"}}),e.jsx("div",{style:{position:"absolute",top:0,left:"5%",right:"5%",height:"2px",background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent)",pointerEvents:"none"}}),e.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:"50%",background:`linear-gradient(90deg, rgba(239,68,68,${R?n*.4:0}) 0%, transparent 100%)`,pointerEvents:"none",transition:d?"none":"background 0.2s",display:"flex",alignItems:"center",justifyContent:"flex-start",paddingLeft:"24px"},children:e.jsx("span",{style:{fontSize:"48px",opacity:R?n:0,color:"#ef4444"},children:"âœ—"})}),e.jsx("div",{style:{position:"absolute",right:0,top:0,bottom:0,width:"50%",background:`linear-gradient(-90deg, rgba(16,185,129,${C?n*.4:0}) 0%, transparent 100%)`,pointerEvents:"none",transition:d?"none":"background 0.2s",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"24px"},children:e.jsx("span",{style:{fontSize:"48px",opacity:C?n:0,color:"#10b981"},children:"âœ“"})}),e.jsx("div",{style:{fontSize:"clamp(90px, 25vw, 160px)",fontWeight:"200",lineHeight:1,color:"white",textAlign:"center",marginBottom:"20px",textShadow:"0 2px 10px rgba(0,0,0,0.3)"},children:u}),(r.shownRomaji||r.romaji)&&e.jsx("div",{style:{fontSize:"40px",color:"#ff69b4",fontWeight:"700",letterSpacing:"8px",textTransform:"lowercase",textShadow:"0 0 30px rgba(255, 105, 180, 0.6), 0 2px 8px rgba(0,0,0,0.3)"},children:r.shownRomaji||r.romaji})]})]})}function W({title:r}){const s=F(),{language:i,setLanguage:g}=$();return e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 8px",background:"linear-gradient(180deg, rgba(156, 163, 175, 0.7) 0%, rgba(107, 114, 128, 0.8) 100%)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:"100px",margin:"12px 16px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.25), inset 0 1px 1px rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.15)"},children:[e.jsx("button",{onClick:()=>s(-1),style:{width:"44px",height:"44px",borderRadius:"50%",background:"linear-gradient(180deg, rgba(75, 85, 99, 0.9) 0%, rgba(55, 65, 81, 1) 100%)",border:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white",fontSize:"22px",fontWeight:"300",flexShrink:0,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255,255,255,0.1)"},children:"â€¹"}),e.jsx("span",{style:{flex:1,fontSize:"18px",fontWeight:"600",color:"white",textAlign:"center",textShadow:"0 1px 2px rgba(0, 0, 0, 0.2)",letterSpacing:"0.5px"},children:r}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"2px",flexShrink:0,marginRight:"4px"},children:[e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"rgba(255,255,255,0.7)",strokeWidth:"1.5",style:{marginRight:"4px"},children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),e.jsx("span",{onClick:()=>g("de"),style:{fontSize:"14px",fontWeight:"700",color:i==="de"?"white":"rgba(255,255,255,0.6)",cursor:"pointer",padding:"8px 10px",borderRadius:"20px",backgroundColor:i==="de"?"#ec4899":"transparent",transition:"all 0.2s"},children:"DE"}),e.jsx("span",{onClick:()=>g("en"),style:{fontSize:"14px",fontWeight:"700",cursor:"pointer",padding:"8px 12px",borderRadius:"20px",backgroundColor:i==="en"?"#ec4899":"transparent",color:i==="en"?"white":"rgba(255,255,255,0.6)",transition:"all 0.2s",boxShadow:i==="en"?"0 2px 8px rgba(236, 72, 153, 0.4)":"none"},children:"EN"})]})]})}function A({contentType:r,groupId:s,cardCount:i}){const[g,S]=o.useState([]),[y,p]=o.useState(!0),[b,z]=o.useState(null),[h,d]=o.useState(null),[v,c]=o.useState(!1),x=o.useRef(null),u=o.useRef(null),t=T(g,i,r),k=(l,n,C,R)=>{x.current&&clearTimeout(x.current),d({isCorrect:l,correctRomaji:C,character:R,id:Date.now()}),c(!0),x.current=setTimeout(()=>{c(!1),x.current=setTimeout(()=>d(null),300)},2500),t.handleSwipe(l,n)},j=l=>{u.current&&u.current(l)};if(o.useEffect(()=>()=>{x.current&&clearTimeout(x.current)},[]),o.useEffect(()=>{(async()=>{try{const n=s==="all"?await B(r):await L(r,s);S(n.items||[])}catch(n){z(n.message)}finally{p(!1)}})()},[r,s]),y)return e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100dvh",backgroundColor:"#0f172a",color:"rgba(255,255,255,0.6)"},children:"Laden..."});if(b)return e.jsx("div",{style:{padding:"20px",minHeight:"100dvh",backgroundColor:"#0f172a"},children:e.jsxs("div",{style:{padding:"20px",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"16px",color:"#ef4444"},children:["Fehler: ",b]})});if(t.gameState==="finished"){const l=t.stats.correct+t.stats.incorrect,n=l>0?Math.round(t.stats.correct/l*100):0;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",minHeight:"100dvh",backgroundColor:"#0f172a",backgroundImage:"url(/japanese-cards/images/swipe-bg.png)",backgroundSize:"cover"},children:[e.jsx(W,{title:"Ergebnis"}),e.jsx("div",{style:{flex:1,padding:"20px",overflowY:"auto"},children:e.jsxs("div",{style:{background:"rgba(30,41,59,0.8)",backdropFilter:"blur(20px)",borderRadius:"20px",border:"1px solid rgba(236,72,153,0.2)",padding:"32px 24px",textAlign:"center",marginBottom:"20px"},children:[e.jsx("h2",{style:{fontSize:"28px",fontWeight:"700",color:"white",margin:"0 0 24px"},children:"Spiel beendet! ðŸŽ‰"}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"40px"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"14px",color:"rgba(255,255,255,0.5)",margin:0},children:"Richtig"}),e.jsxs("p",{style:{fontSize:"36px",fontWeight:"700",color:"#10b981",margin:"8px 0 0"},children:[t.stats.correct,"/",l]})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"14px",color:"rgba(255,255,255,0.5)",margin:0},children:"Prozent"}),e.jsxs("p",{style:{fontSize:"36px",fontWeight:"700",color:"#ec4899",margin:"8px 0 0"},children:[n,"%"]})]})]})]})})]})}const w=t.currentIndex/t.totalCards*100;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",minHeight:"100dvh",height:"100dvh",maxHeight:"100dvh",overflow:"hidden",backgroundColor:"#0f172a",backgroundImage:"url(/japanese-cards/images/swipe-bg.png)",backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{style:{flexShrink:0},children:e.jsx(W,{title:"Swipe Game"})}),e.jsx("div",{style:{flexShrink:0,textAlign:"center",padding:"4px 20px 12px"},children:e.jsx("span",{style:{fontSize:"18px",fontWeight:"500",color:"white"},children:"Ist die Kombination richtig?"})}),h&&e.jsx("div",{style:{position:"fixed",top:"120px",left:"50%",transform:"translateX(-50%)",zIndex:1e3,opacity:v?1:0,transition:"opacity 0.3s",pointerEvents:"none"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 24px",backgroundColor:h.isCorrect?"rgba(16,185,129,0.9)":"rgba(239,68,68,0.9)",backdropFilter:"blur(10px)",borderRadius:"16px"},children:[e.jsx("span",{style:{fontSize:"20px",fontWeight:"bold",color:"white"},children:h.isCorrect?"âœ“":"âœ—"}),e.jsxs("span",{style:{fontSize:"17px",fontWeight:"600",color:"white"},children:[h.character," = ",h.correctRomaji]})]})}),e.jsx("div",{style:{flex:1,position:"relative",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 16px",minHeight:0,overflow:"hidden"},children:t.cardStack.map((l,n)=>e.jsx(X,{card:l,index:n,isActive:n===0,onSwipe:k,correctAnswer:n===0?t.correctAnswer:void 0,onButtonClick:n===0?u:void 0},`${t.currentIndex+n}`))}),e.jsxs("div",{style:{flexShrink:0,padding:"12px 16px",paddingBottom:"calc(12px + env(safe-area-inset-bottom, 0px))"},children:[e.jsx("div",{style:{textAlign:"center",marginBottom:"8px"},children:e.jsxs("span",{style:{fontSize:"14px",fontWeight:"500",color:"rgba(255,255,255,0.6)"},children:[t.currentIndex+1,"/",t.totalCards]})}),e.jsx("div",{style:{height:"5px",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"3px",overflow:"hidden",marginBottom:"16px"},children:e.jsx("div",{style:{height:"100%",width:`${w}%`,background:"linear-gradient(90deg, #ec4899, #d946ef)",borderRadius:"3px",transition:"width 0.3s"}})}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsxs("button",{onClick:()=>j(!1),style:{flex:1,padding:"16px 24px",borderRadius:"100px",background:"linear-gradient(135deg, rgba(45, 55, 72, 0.95) 0%, rgba(30, 41, 59, 0.98) 100%)",backdropFilter:"blur(10px)",border:"2px solid rgba(239, 68, 68, 0.7)",color:"#f87171",fontSize:"17px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",boxShadow:"0 0 25px rgba(239, 68, 68, 0.3), 0 0 50px rgba(239, 68, 68, 0.15), inset 0 1px 0 rgba(255,255,255,0.05)"},children:[e.jsx("span",{style:{width:"28px",height:"28px",borderRadius:"50%",backgroundColor:"rgba(239, 68, 68, 0.25)",border:"2px solid rgba(239, 68, 68, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"15px",fontWeight:"bold"},children:"âœ—"}),e.jsx("span",{children:"Falsch"})]}),e.jsxs("button",{onClick:()=>j(!0),style:{flex:1,padding:"16px 24px",borderRadius:"100px",background:"linear-gradient(135deg, rgba(45, 55, 72, 0.95) 0%, rgba(30, 41, 59, 0.98) 100%)",backdropFilter:"blur(10px)",border:"2px solid rgba(16, 185, 129, 0.7)",color:"#34d399",fontSize:"17px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",boxShadow:"0 0 25px rgba(16, 185, 129, 0.3), 0 0 50px rgba(16, 185, 129, 0.15), inset 0 1px 0 rgba(255,255,255,0.05)"},children:[e.jsx("span",{style:{width:"28px",height:"28px",borderRadius:"50%",backgroundColor:"rgba(16, 185, 129, 0.25)",border:"2px solid rgba(16, 185, 129, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"15px",fontWeight:"bold"},children:"âœ“"}),e.jsx("span",{children:"Richtig"})]})]})]})]})}export{A as default};
