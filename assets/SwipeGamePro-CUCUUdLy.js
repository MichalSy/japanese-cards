import{r as o,j as e,u as F,b as T,f as G,a as L}from"./index-DeO9nTww.js";import{u as B}from"./useSwipeGame-Bi-kdHzz.js";function H({card:r,index:a,isActive:i,onSwipe:h,correctAnswer:g,onButtonClick:j}){const[x,y]=o.useState(null),[R,u]=o.useState(0),[d,v]=o.useState(!1),[c,p]=o.useState({x:0,rotation:0}),f=r?.character||r?.word||"",t=o.useCallback(s=>{if(!r||x==="exit")return;const b=s===g,m=s?"right":"left";y("exit"),p({x:m==="right"?300:-300,rotation:m==="right"?10:-10}),setTimeout(()=>{h(b,m,r.correctRomaji,f)},220)},[r,g,h,f,x]);if(o.useEffect(()=>{j&&i&&(j.current=t)},[j,i,t]),o.useEffect(()=>{if(!i||x||!r)return;const s=b=>{b.key==="ArrowLeft"?(b.preventDefault(),t(!1)):b.key==="ArrowRight"&&(b.preventDefault(),t(!0))};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[i,x,r,t]),!r)return null;const k=s=>{!i||x||(s.preventDefault(),v(!0),y("swiping"),u(s.touches?s.touches[0].clientX:s.clientX))},w=s=>{if(!i||!d)return;s.preventDefault();const m=(s.touches?s.touches[0].clientX:s.clientX)-R;p({x:m,rotation:Math.max(-8,Math.min(8,m/300*6))})},S=()=>{!i||!d||(v(!1),c.x<-80?t(!1):c.x>80?t(!0):(y(null),p({x:0,rotation:0})))},l=()=>d?"none":x==="exit"?"all 0.22s ease-out":"all 0.28s cubic-bezier(0.34, 1.2, 0.64, 1)",n=Math.min(1,Math.abs(c.x)/50),C=c.x>0,z=c.x<0,D=a*3,E=1-a*.01,M=a===0?1:Math.max(.45,.7-a*.08),I=a===0?0:a*.8;return e.jsxs(e.Fragment,{children:[e.jsx("svg",{width:"0",height:"0",style:{position:"absolute",visibility:"hidden"},children:e.jsx("defs",{children:e.jsxs("filter",{id:"cardFrostedGlassFilter",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feTurbulence",{type:"fractalNoise",baseFrequency:"0.005",numOctaves:"5",result:"noise",seed:"2"}),e.jsx("feDisplacementMap",{in:"SourceGraphic",in2:"noise",scale:"40",xChannelSelector:"R",yChannelSelector:"G",result:"displaced"}),e.jsx("feGaussianBlur",{in:"displaced",stdDeviation:"15",result:"blurred"}),e.jsx("feBlend",{in:"blurred",in2:"SourceGraphic",mode:"multiply"})]})})}),e.jsx("div",{onTouchStart:k,onTouchMove:w,onTouchEnd:S,onMouseDown:k,onMouseMove:d?w:void 0,onMouseUp:S,onMouseLeave:d?S:void 0,style:{position:"absolute",left:"50%",top:"50%",transform:`translate(-50%, -50%) translate(${c.x}px, ${D}px) rotate(${c.rotation}deg) scale(${E})`,width:"calc(100% - 48px)",maxWidth:"276px",aspectRatio:"9/12",backgroundColor:"transparent",padding:"6px",borderRadius:"34px",border:a===0?"2px solid rgba(236, 72, 153, 1)":"1px solid rgba(255, 255, 255, 0.1)",boxShadow:a===0?`
          0 0 15px rgba(236, 72, 153, 0.8), /* Inner/Outer Glow around the line */
          0 0 40px rgba(236, 72, 153, 0.4), /* Outer Glow */
          0 10px 40px rgba(0, 0, 0, 0.5)    /* Strong Drop Shadow for depth */
        `:"0 4px 12px rgba(0, 0, 0, 0.3)",zIndex:100-a,cursor:i&&!d?"grab":d?"grabbing":"default",transition:l(),willChange:"transform, opacity",opacity:x==="exit"?0:M,userSelect:"none",overflow:"visible",touchAction:"none",filter:I>0?`blur(${I}px)`:"none",boxSizing:"border-box"},children:e.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",borderRadius:"26px",backgroundColor:"rgba(200, 200, 210, 0.4)",boxShadow:"inset 0 1px 2px rgba(255, 255, 255, 0.4)",border:"1px solid rgba(255,255,255,0.3)",overflow:"hidden",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",filter:"url(#cardFrostedGlassFilter)"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"50%",background:"linear-gradient(180deg, rgba(255,255,255,0.35) 0%, rgba(255,255,255,0.18) 20%, rgba(255,255,255,0.05) 50%, transparent 100%)",pointerEvents:"none",zIndex:1}}),e.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:"50%",background:`linear-gradient(90deg, rgba(239,68,68,${z?n*.25:0}) 0%, transparent 100%)`,pointerEvents:"none",transition:d?"none":"background 0.2s",display:"flex",alignItems:"center",justifyContent:"flex-start",paddingLeft:"24px",zIndex:1},children:e.jsx("span",{style:{fontSize:"44px",opacity:z?n:0,color:"white",fontWeight:"700"},children:"âœ—"})}),e.jsx("div",{style:{position:"absolute",right:0,top:0,bottom:0,width:"50%",background:`linear-gradient(-90deg, rgba(16,185,129,${C?n*.25:0}) 0%, transparent 100%)`,pointerEvents:"none",transition:d?"none":"background 0.2s",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"24px",zIndex:1},children:e.jsx("span",{style:{fontSize:"44px",opacity:C?n:0,color:"white",fontWeight:"700"},children:"âœ“"})}),e.jsxs("div",{style:{position:"relative",zIndex:2,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"clamp(100px, 28vw, 170px)",fontWeight:"300",lineHeight:1,color:"white",textAlign:"center",marginBottom:"24px",textShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:f}),(r.shownRomaji||r.romaji)&&e.jsx("div",{style:{fontSize:"40px",color:"rgba(255, 255, 255, 0.95)",fontWeight:"600",letterSpacing:"2px",textTransform:"lowercase",textShadow:"0 1px 4px rgba(0,0,0,0.3)"},children:r.shownRomaji||r.romaji})]})]})})]})}function W({title:r}){const a=F(),{language:i,setLanguage:h}=T();return e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"8px",background:"rgba(255, 255, 255, 0.08)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:"100px",margin:"12px 16px",boxShadow:"inset 0 0 12px rgba(255, 255, 255, 0.1), 0 4px 20px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(255, 255, 255, 0.15)",height:"52px",position:"relative",boxSizing:"border-box"},children:[e.jsx("button",{onClick:()=>a(-1),style:{width:"36px",height:"36px",flexShrink:0,zIndex:1,borderRadius:"50%",background:"rgba(255, 255, 255, 0.1)",border:"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white",fontSize:"20px",fontWeight:"300",transition:"background-color 0.2s",padding:0},onMouseEnter:g=>g.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.2)",onMouseLeave:g=>g.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",children:"â€¹"}),e.jsx("span",{style:{fontSize:"18px",fontWeight:"700",color:"white",textShadow:"0 1px 2px rgba(0, 0, 0, 0.2)",letterSpacing:"0.5px",whiteSpace:"nowrap",marginLeft:"12px",flex:1},children:r}),e.jsxs("div",{style:{display:"flex",alignItems:"center",flexShrink:0,zIndex:1,gap:"6px"},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"rgba(255,255,255,0.7)",strokeWidth:"1.5",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",backgroundColor:"rgba(255,255,255,0.05)",borderRadius:"18px",padding:"3px",border:"1px solid rgba(255,255,255,0.1)",gap:"1px"},children:[e.jsx("button",{onClick:()=>h("de"),style:{fontSize:"11px",fontWeight:"700",color:i==="de"?"white":"rgba(255,255,255,0.5)",cursor:"pointer",padding:"4px 10px",borderRadius:"14px",backgroundColor:i==="de"?"#ec4899":"transparent",transition:"all 0.2s ease-out",border:"none",boxShadow:i==="de"?"0 4px 12px rgba(236, 72, 153, 0.4)":"none"},children:"DE"}),e.jsx("button",{onClick:()=>h("en"),style:{fontSize:"11px",fontWeight:"700",cursor:"pointer",padding:"4px 10px",borderRadius:"14px",backgroundColor:i==="en"?"#ec4899":"transparent",color:i==="en"?"white":"rgba(255,255,255,0.5)",transition:"all 0.2s ease-out",border:"none",boxShadow:i==="en"?"0 4px 12px rgba(236, 72, 153, 0.4)":"none"},children:"EN"})]})]})]})}function P({contentType:r,groupId:a,cardCount:i}){const[h,g]=o.useState([]),[j,x]=o.useState(!0),[y,R]=o.useState(null),[u,d]=o.useState(null),[v,c]=o.useState(!1),p=o.useRef(null),f=o.useRef(null),t=B(h,i,r),k=(l,n,C,z)=>{p.current&&clearTimeout(p.current),d({isCorrect:l,correctRomaji:C,character:z,id:Date.now()}),c(!0),p.current=setTimeout(()=>{c(!1),p.current=setTimeout(()=>d(null),300)},2500),t.handleSwipe(l,n)},w=l=>{f.current&&f.current(l)};if(o.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]),o.useEffect(()=>{(async()=>{try{const n=a==="all"?await G(r):await L(r,a);g(n.items||[])}catch(n){R(n.message)}finally{x(!1)}})()},[r,a]),j)return e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100dvh",background:"radial-gradient(circle at 15% 10%, rgba(236, 72, 153, 0.4) 0%, transparent 50%), linear-gradient(135deg, #1a1a3e 0%, #0f172a 100%)",color:"rgba(255,255,255,0.6)"},children:"Laden..."});if(y)return e.jsx("div",{style:{padding:"20px",minHeight:"100dvh",background:"radial-gradient(circle at 15% 10%, rgba(236, 72, 153, 0.4) 0%, transparent 50%), linear-gradient(135deg, #1a1a3e 0%, #0f172a 100%)"},children:e.jsxs("div",{style:{padding:"20px",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"16px",color:"#ef4444"},children:["Fehler: ",y]})});if(t.gameState==="finished"){const l=t.stats.correct+t.stats.incorrect,n=l>0?Math.round(t.stats.correct/l*100):0;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",minHeight:"100dvh",background:"radial-gradient(circle at 15% 10%, rgba(236, 72, 153, 0.4) 0%, transparent 50%), linear-gradient(135deg, #1a1a3e 0%, #0f172a 100%)"},children:[e.jsx(W,{title:"Ergebnis"}),e.jsx("div",{style:{flex:1,padding:"20px",overflowY:"auto"},children:e.jsxs("div",{style:{background:"rgba(30,41,59,0.8)",backdropFilter:"blur(20px)",borderRadius:"20px",border:"1px solid rgba(236,72,153,0.2)",padding:"32px 24px",textAlign:"center",marginBottom:"20px"},children:[e.jsx("h2",{style:{fontSize:"28px",fontWeight:"700",color:"white",margin:"0 0 24px"},children:"Spiel beendet! ðŸŽ‰"}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"40px"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"14px",color:"rgba(255,255,255,0.5)",margin:0},children:"Richtig"}),e.jsxs("p",{style:{fontSize:"36px",fontWeight:"700",color:"#10b981",margin:"8px 0 0"},children:[t.stats.correct,"/",l]})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"14px",color:"rgba(255,255,255,0.5)",margin:0},children:"Prozent"}),e.jsxs("p",{style:{fontSize:"36px",fontWeight:"700",color:"#ec4899",margin:"8px 0 0"},children:[n,"%"]})]})]})]})})]})}const S=t.currentIndex/t.totalCards*100;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",minHeight:"100dvh",overflow:"auto",background:`
        radial-gradient(circle at 15% 10%, rgba(236, 72, 153, 0.4) 0%, transparent 50%),
        radial-gradient(circle at 85% 95%, rgba(236, 72, 153, 0.3) 0%, transparent 50%),
        linear-gradient(135deg, #1a1a3e 0%, #2d1b4e 25%, #0f172a 50%, #0d1e3f 100%)
      `,backgroundAttachment:"fixed"},children:[e.jsx("div",{style:{flexShrink:0},children:e.jsx(W,{title:"Swipe Game"})}),e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",minHeight:"40px"},children:e.jsx("span",{style:{fontSize:"18px",fontWeight:"500",color:"rgba(255, 255, 255, 0.9)",textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:"Ist die Kombination richtig?"})}),u&&e.jsx("div",{style:{position:"fixed",top:"120px",left:"50%",transform:"translateX(-50%)",zIndex:1e3,opacity:v?1:0,transition:"opacity 0.3s",pointerEvents:"none"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 24px",backgroundColor:u.isCorrect?"rgba(16,185,129,0.9)":"rgba(239,68,68,0.9)",backdropFilter:"blur(10px)",borderRadius:"16px"},children:[e.jsx("span",{style:{fontSize:"20px",fontWeight:"bold",color:"white"},children:u.isCorrect?"âœ“":"âœ—"}),e.jsxs("span",{style:{fontSize:"17px",fontWeight:"600",color:"white"},children:[u.character," = ",u.correctRomaji]})]})}),e.jsx("div",{style:{flex:4,position:"relative",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 16px",minHeight:0,overflow:"hidden",maxHeight:"65vh"},children:t.cardStack.map((l,n)=>e.jsx(H,{card:l,index:n,isActive:n===0,onSwipe:k,correctAnswer:n===0?t.correctAnswer:void 0,onButtonClick:n===0?f:void 0},`${t.currentIndex+n}`))}),e.jsxs("div",{style:{flexShrink:0,padding:"8px 16px",paddingBottom:"calc(40px + env(safe-area-inset-bottom, 20px))"},children:[e.jsx("div",{style:{textAlign:"center",marginBottom:"10px"},children:e.jsxs("span",{style:{fontSize:"12px",fontWeight:"500",color:"rgba(255,255,255,0.6)"},children:[t.currentIndex+1,"/",t.totalCards]})}),e.jsx("div",{style:{height:"3px",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"2px",overflow:"hidden",marginBottom:"12px"},children:e.jsx("div",{style:{height:"100%",width:`${S}%`,background:"linear-gradient(90deg, #ec4899, #d946ef)",borderRadius:"2px",transition:"width 0.3s"}})}),e.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center",justifyContent:"center",width:"100%",paddingX:"16px"},children:[e.jsxs("button",{onClick:()=>w(!1),style:{flex:1,padding:"12px 20px",borderRadius:"100px",background:"transparent",backdropFilter:"none",border:"2.5px solid rgba(239, 68, 68, 0.8)",color:"#f87171",fontSize:"16px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",boxShadow:"none",transition:"all 0.2s",maxWidth:"180px"},children:[e.jsx("span",{style:{width:"22px",height:"22px",borderRadius:"50%",backgroundColor:"transparent",border:"1.5px solid rgba(239, 68, 68, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"13px",fontWeight:"bold",color:"#f87171",flexShrink:0},children:"âœ—"}),"Falsch"]}),e.jsxs("button",{onClick:()=>w(!0),style:{flex:1,padding:"12px 20px",borderRadius:"100px",background:"transparent",backdropFilter:"none",border:"2.5px solid rgba(16, 185, 129, 0.8)",color:"#34d399",fontSize:"16px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",boxShadow:"none",transition:"all 0.2s",maxWidth:"180px"},children:[e.jsx("span",{style:{width:"22px",height:"22px",borderRadius:"50%",backgroundColor:"transparent",border:"1.5px solid rgba(16, 185, 129, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"13px",fontWeight:"bold",color:"#34d399",flexShrink:0},children:"âœ“"}),"Richtig"]})]})]})]})}export{P as default};
